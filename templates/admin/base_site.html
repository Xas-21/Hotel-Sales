{% extends "admin/base.html" %}
{% load static %}

{% block title %}{{ title }} | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block extrahead %}
    {{ block.super }}
    <link rel="stylesheet" type="text/css" href="{% static 'admin/css/admin_layout_fix.css' %}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
{% endblock %}

{% block bodyclass %}admin{% endblock %}

{% block extrastyle %}
    {{ block.super }}
    <style>
        /* Hide default Django Admin blue header */
        #header { display: none !important; }

        /* Minimal styles so the persistent navbar looks correct without Bootstrap CSS */
        .hsrms-nav { background-color: #212529; color: #fff; position: sticky; top: 0; z-index: 1050; box-shadow: 0 2px 4px rgba(0,0,0,.1); }
        .hsrms-nav .container-fluid { display: flex; align-items: center; gap: 0; padding: 8px 16px; flex-wrap: nowrap; }
        .hsrms-nav .navbar-brand { color: #fff; text-decoration: none; font-weight: 600; margin-right: 1rem; white-space: nowrap; }
        .hsrms-nav .navbar-nav { display: flex; list-style: none; list-style-type: none; padding: 0; margin: 0; align-items: center; gap: 0; }
        .hsrms-nav .navbar-nav.me-auto { margin-right: auto; } /* Push left nav to left, right nav to right */
        .hsrms-nav .nav-item { position: relative; list-style: none; list-style-type: none; }
        .hsrms-nav .nav-item::before { display: none !important; content: none !important; }
        .hsrms-nav ul, .hsrms-nav li { list-style: none !important; list-style-type: none !important; }
        .hsrms-nav .nav-link { color: rgba(255,255,255,.55); text-decoration: none; padding: 8px 12px; display: block; transition: color .15s ease-in-out; white-space: nowrap; }
        .hsrms-nav .nav-link:hover, .hsrms-nav .nav-link.active { color: #fff; }
        .hsrms-nav .dropdown-menu { position: absolute; right: 0; top: 100%; min-width: 200px; background: #fff; color: #212529; border: 1px solid rgba(0,0,0,.15); border-radius: 12px; padding: 0; display: none; z-index: 2000; box-shadow: 0 0.5rem 1rem rgba(0,0,0,.175); overflow: hidden; }
        .hsrms-nav .dropdown-menu.show { display: block; }
        .hsrms-nav .dropdown-item, .hsrms-nav .dropdown-item-text { padding: 6px 12px; color: inherit; text-decoration: none; display: block; clear: both; width: 100%; }
        .hsrms-nav .dropdown-item:hover { background: #e9ecef; }
        .hsrms-nav .dropdown-divider { height: 0; margin: 0; overflow: hidden; border-top: 1px solid rgba(0,0,0,.15); }
        .hsrms-nav .badge { display: inline-block; padding: .35em .65em; font-size: .75em; font-weight: 700; line-height: 1; text-align: center; white-space: nowrap; vertical-align: baseline; border-radius: .25rem; }
        .hsrms-nav .bg-danger { background-color: #dc3545; color: #fff; }
        .hsrms-nav .dropdown-toggle::after { display: inline-block; margin-left: .255em; vertical-align: .255em; content: ""; border-top: .3em solid; border-right: .3em solid transparent; border-bottom: 0; border-left: .3em solid transparent; }
        /* Simple shims for Bootstrap utility classes used in navbar */
        .me-1 { margin-right: .25rem; }
        .me-2 { margin-right: .5rem; }
        .ms-2 { margin-left: .5rem; }
        .mb-0 { margin-bottom: 0; }
        .mb-1 { margin-bottom: .25rem; }
        .mb-3 { margin-bottom: 1rem; }
        .p-0 { padding: 0; }
        .fw-bold { font-weight: 700; }
        .text-muted { color: #6c757d; }
        .text-center { text-align: center; }
        .text-danger { color: #dc3545; }
        .text-warning { color: #ffc107; }
        .text-info { color: #0dcaf0; }
        .text-success { color: #198754; }
        .text-primary { color: #0d6efd; }
        .text-secondary { color: #6c757d; }
        .text-dark { color: #212529; }
        .small { font-size: 0.875em; }
        .d-flex { display: flex; }
        .flex-column { flex-direction: column; }
        .flex-grow-1 { flex-grow: 1; }
        .justify-content-between { justify-content: space-between; }
        .align-items-center { align-items: center; }
        .align-items-start { align-items: flex-start; }
        .dropdown-menu-end { right: 0; left: auto; }
        .dropdown-header { padding: .5rem 1rem; margin-bottom: 0; font-size: .875rem; color: #6c757d; white-space: nowrap; }
        .position-relative { position: relative; }
        .position-absolute { position: absolute; }
        .top-0 { top: 0; }
        .start-100 { left: 100%; }
        .translate-middle { transform: translate(-50%, -50%); }
        .rounded-pill { border-radius: 50rem; }
        .gap-2 { gap: .5rem; }
        .btn { display: inline-block; padding: .375rem .75rem; font-size: 1rem; line-height: 1.5; border-radius: .25rem; text-decoration: none; cursor: pointer; }
        .btn-sm { padding: .25rem .5rem; font-size: .875rem; }
        .btn-link { color: #0d6efd; background: transparent; border: 0; }
        .btn-outline-primary { color: #0d6efd; border: 1px solid #0d6efd; background: transparent; }
        /* Position the notification badge without Bootstrap */
        #notificationsDropdown { position: relative; }
        #notification-badge { position: absolute; top: 0; left: 100%; transform: translate(-50%, -50%); }

        /* Keep admin background dark */
        body { background: #000; color: #eaeaea; }
        #content { background: #121212; color: #eaeaea; }
        
        /* Fix Actions Bar with Black Background and White Text */
        .actions,
        form .actions,
        .changelist-form-container .actions,
        #changelist .actions {
            display: flex !important;
            align-items: center !important;
            gap: 8px !important;
            margin-bottom: 15px !important;
            background-color: #000000 !important;
            background: #000000 !important;
            border: 1px solid #333 !important;
            border-radius: 4px !important;
            padding: 12px 15px !important;
        }

        .actions label,
        .actions > label,
        form .actions label,
        .changelist-form-container .actions label {
            font-weight: 600 !important;
            color: #ffffff !important;
            margin: 0 !important;
            white-space: nowrap !important;
        }

        .actions select,
        .actions > select,
        form .actions select,
        .changelist-form-container .actions select,
        .actions .action-select {
            height: 38px !important;
            min-width: 200px !important;
            padding: 6px 12px !important;
            border: 1px solid #666 !important;
            border-radius: 4px !important;
            background-color: #000000 !important;
            background: #000000 !important;
            color: #ffffff !important;
            font-size: 14px !important;
            line-height: 1.5 !important;
            margin: 0 !important;
            vertical-align: middle !important;
        }

        .actions select option,
        form .actions select option,
        .changelist-form-container .actions select option {
            background-color: #000000 !important;
            background: #000000 !important;
            color: #ffffff !important;
        }

        .actions button[type="submit"],
        .actions input[type="submit"],
        .actions .button {
            height: 38px !important;
            padding: 6px 20px !important;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
            color: white !important;
            border: none !important;
            border-radius: 4px !important;
            font-size: 14px !important;
            font-weight: 600 !important;
            cursor: pointer !important;
            transition: all 0.3s ease !important;
            line-height: 1.5 !important;
            vertical-align: middle !important;
            margin: 0 !important;
        }

        .actions button[type="submit"]:hover,
        .actions input[type="submit"]:hover,
        .actions .button:hover {
            background: linear-gradient(135deg, #5568d3 0%, #6a3f8f 100%) !important;
            transform: translateY(-1px) !important;
            box-shadow: 0 4px 8px rgba(102, 126, 234, 0.3) !important;
        }
    </style>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Handle user dropdown toggle
            var userToggle = document.getElementById('navbarDropdown');
            var userMenu = userToggle ? userToggle.nextElementSibling : null;
            if (userToggle && userMenu) {
                userToggle.addEventListener('click', function (e) {
                    e.preventDefault();
                    userMenu.classList.toggle('show');
                });
                document.addEventListener('click', function (e) {
                    if (!e.target.closest('#navbarDropdown') && !e.target.closest('.dropdown-menu')) {
                        userMenu.classList.remove('show');
                    }
                });
            }
            
            // Handle notifications dropdown toggle
            var notifToggle = document.getElementById('notificationsDropdown');
            var notifMenu = notifToggle ? notifToggle.nextElementSibling : null;
            if (notifToggle && notifMenu) {
                notifToggle.addEventListener('click', function (e) {
                    e.preventDefault();
                    notifMenu.classList.toggle('show');
                });
            }
        });
    </script>
{% endblock %}

{% block branding %}
<h1 id="site-name">
    <a href="{% url 'admin:index' %}">
        {{ site_header|default:_('Hotel Sales Management System') }}
    </a>
</h1>
{% endblock %}

{% block nav-breadcrumbs %}
{% include 'components/topnav.html' %}
{% endblock %}

{% block userlinks %}
    {% if site_url %}
        <a href="{{ site_url }}">View site</a> /
    {% endif %}
    {% if user.is_active and user.is_staff %}
        {% url 'django-admindocs-docroot' as docsroot %}
        {% if docsroot %}
            <a href="{{ docsroot }}">Documentation</a> /
        {% endif %}
    {% endif %}
    {% if user.has_usable_password %}
        <a href="{% url 'admin:password_change' %}">Change password</a> /
    {% endif %}
    <form id="logout-form" method="post" action="{% url 'admin:logout' %}" style="display: inline;">
        {% csrf_token %}
        <button type="submit" style="background: none; border: none; color: inherit; text-decoration: underline; cursor: pointer; padding: 0; font: inherit;">
            Log out
        </button>
    </form>
{% endblock %}
